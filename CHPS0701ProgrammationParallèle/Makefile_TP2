# Makefile pour TP2 OpenMP
# Compilation: make -f Makefile_TP2
# Nettoyage: make -f Makefile_TP2 clean

CC = gcc
CFLAGS = -fopenmp -Wall -O2
LDFLAGS = -fopenmp -lm

TARGETS = ex1_monte_carlo ex2_mandelbrot ex3_maitre_esclave

all: $(TARGETS)

ex1_monte_carlo: TP2_ex1_monte_carlo.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)

ex2_mandelbrot: TP2_ex2_mandelbrot.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)

ex3_maitre_esclave: TP2_ex3_maitre_esclave.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)

clean:
	rm -f $(TARGETS) *.pgm *.o

test: all
	@echo "test monte carlo"
	./ex1_monte_carlo 1000000
	@echo ""
	@echo "test mandelbrot"
	./ex2_mandelbrot 256 256 128
	@echo ""
	@echo "test maitre esclave"
	./ex3_maitre_esclave

.PHONY: all clean test
